<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="http://code.jquery.com/jquery-3.1.1.js"></script>

<style>
     *{margin:0;padding:0;}
   
    .section{
        width:100%;
        height:100vh;
    }
   

   #main{
      background-color:pink;
   }
   #about{
      background-color:plum;
      border: 1px solid transparent;
   }
   #port{
    background-color: tan;
   }
   #contact{
    background-color: aqua;
   }
   .skills_box{
      width: 50%;
      height: 50%;
      margin: 20% auto;
   }
   .skill{
        width:100%;
        height: 40px;
        background-color: #fff;
        margin-bottom: 10px;
        position: relative;
        line-height: 40px;
   }
   .skill_n{
      position: absolute;
      z-index: 20;
      left: 20px;
   }
   .skill_bg{
      position: absolute;
      width: 0%;
      height: 40px;
      background-color: orange;
      z-index: 10;
   }
   .skill_p{
      position: absolute;
      height: 40px;
      z-index: 20;
      right : 20px;
   }

</style>    
</head>
<body>
    <div id="wrap">
        <div class="section" id="main">
          
        </div>
        <div class="section" id="about">
           <div class="skills_box">
              <div class="skill">
                 <div class="skill_n">Adobe Photoshop</div>
                 <div class="skill_bg"></div>
                 <div class="skill_p">85</div>
              </div>
              <div class="skill">
                 <div class="skill_n">CSS3</div>
                 <div class="skill_bg"></div>
                 <div class="skill_p">98</div>
              </div>
              <div class="skill">
                 <div class="skill_n">Jquery</div>
                 <div class="skill_bg"></div>
                 <div class="skill_p">87</div>
              </div>
              <div class="skill">
                 <div class="skill_n">Photoshop</div>
                 <div class="skill_bg"></div>
                 <div class="skill_p">98</div>
              </div>
              <div class="skill">
                 <div class="skill_n">Illustrator</div>
                 <div class="skill_bg"></div>
                 <div class="skill_p">100</div>
              </div>
           </div>
        </div>
        <div class="section" id="port">
          
        </div>
        <div class="section" id="contact">
          
        </div>
     </div>
     <script>
        $(function(){
           
            var onetime = 0;
            var onestop = 1;
          $(window).scroll(function(){
            var sct = $(window).scrollTop();
            console.log(sct);
            var off =  $('#about').offset().top;
            // console.log(off-300);
            if(sct >= off - 300 && sct <= 1700){
                count2();
            }else{
                onereset();
            }

          });
          function count2(){
            if(onetime == 0){
                $('.skills_box > div').each(function(i){
                    var pnum = $(this).find('.skill_p');
                    var pdata = pnum.text();
                    var chartbg = $(this).find('.skill_bg');//그래프
                    $({percent:0}).delay(i*300).animate({percent:pdata},{
                        duration:3000,
                        progress:function(){
                            var now = this.percent;
                            pnum.text(Math.floor(now));
                            chartbg.css('width',now+'%');
                        }
                    });
                });

            }
            onetime=1;
            onestop=0;
          }

          function onereset(){
            if(onestop == 0){
                $('.skills_box > div').each(function(i){
                    var chartbg = $(this).find('.skill_bg');
                    chartbg.css('width','0');
                });
            }
            onetime=0;
            onestop=1;
          }

        });


     </script>
</body>
</html>